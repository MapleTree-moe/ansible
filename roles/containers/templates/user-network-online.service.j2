### {{ ansible_managed }} - {{ ansible_fqdn }}
###
### mapletree.moe - user service to detect network activation
### https://www.freedesktop.org/software/systemd/man/latest/systemd.service.html
###
### commit: {{ lookup('pipe', 'git rev-parse --short HEAD') }}

# systemD doesn't allow user units to interact with system units. because of
# this we need to have a replacement for network-online.target or many podman
# containers will fail to launch.
# https://access.redhat.com/solutions/7004860

[Unit]
Description=User Wait for Network to be Configured

[Service]
Type=oneshot
ExecStart=/usr/bin/nm-online -s -q
RemainAfterExit=yes

[Install]
WantedBy=default.target
